<!DOCTYPE html>
<html>
    <head>
        <title>Geopost Energy Prova</title>
        <style>
            .center {
                text-align: center;
            }
            .centerTable {
                margin-left: auto;
                margin-right: auto;
            }
        </style>
    </head>
    <body>
        <h2 style="text-align: center;">Gerar os grupos</h2>
        <div class="center">
            <button id="groupButton" onclick="chooseGroup()" >Gerar grupos</button>
            <p id="grupos"></p>
        </div>
        
        <h2 style="text-align: center;">Gerar as partidas</h2>
        <div class="center">
            <button id="partidaButton" onclick="gerarPartidas()">Gerar partidas</button>
            <p id="partidas"></p>
        </div>

        <h2 style="text-align: center;">Ver classificados</h2>
        <div class="center">
            <button id="classificadosButton" onclick="classificados()">Classificação</button>
            <p id="classificados"></p>
        </div>

        <h2 style="text-align: center;">Gerar Torneio</h2>
        <div class="center">
            <button id="torneioButton" onclick="torneio()">Torneio</button>
            <p id="oitavas"></p>
            <p id="quartas"></p>
            <p id="semifinais"></p>
            <p id="final"></p>
            <p id="vencedor"></p>
        </div>
        
        <script>
            const URL_FETCH = 'https://estagio.geopostenergy.com/WorldCup/GetAllTeams';

            var teams = new Array();
            var vencedores = new Array();
            var final = new Array();

            const groups = {A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[]};
            
            var classficadosGrupo = new Array();
            var criterios = new Array();

            fetch(URL_FETCH,{method: 'get',headers: new Headers({'git-user':'brunodf05'})})
            .then(function(response){
                response.json().then(function(data){
                    console.log("JSON",data);
                    for (var key in data.Result){
                        teams.push(data.Result[key]);
                    }
                    console.log("TIMES",teams);
                })
            });

            function shuffle(a){
                var rand,count,temp;
                count = a.length;
                while(count!=0){
                    rand = Math.floor(Math.random() * count);
                    count--;
                    temp = a[count];
                    a[count] = a[rand];
                    a[rand] = temp;
                }
                
            }

            function chooseGroup(){
                shuffle(teams);
                
                let y = 0; 
                let i=0;
                for (var key in groups){
                    while (y<4){
                        groups[key].push(teams[i].Name);
                        y++;
                        i++;
                    }
                    y=0;
                }
                
                let text = "<table border='1' class='centerTable'><tr><th>Grupo A</th><th>Grupo B</th><th>Grupo C</th><th>Grupo D</th><th>Grupo E</th><th>Grupo F</th><th>Grupo G</th><th>Grupo H</th></tr>";
                
                let count = 0;
                let init = groups;

                for (var n=0;n<4;n++) {
                    for (var key in groups) {
                        if (count<8){
                            if (count==0){
                                text+="<tr>";
                            }
                            let aux = groups[key];
                            text+="<td>" + aux[n] + "</td>";
                            count++;
                        }
                        if (count==8) {
                            text+="</tr>";
                            count = 0;
                        }
                    }
                }
                
                text+="</table>";
                document.getElementById("grupos").innerHTML = text;
                document.getElementById("groupButton").disabled = true;
            }

            function fillCriterios(aux,x1,x2,x3,x4,y1,y2,y3,y4,z1,z2,z3,z4){
                let time1 = aux[0];
                let time2 = aux[1];
                let time3 = aux[2];
                let time4 = aux[3];
                
                if(x1>x2){
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=x1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Saldo+=x2;
                            return true;
                        }
                    });
                } 
                else if (x1=x2) {
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=x1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=x2;
                            return true;
                        }
                    });
                } 
                else {
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Saldo+=x1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=x2;
                            return true;
                        }
                    });
                }
                if(x3>x4){
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=x3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Saldo+=x4;
                            return true;
                        }
                    });
                } 
                else if (x3=x4) {
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=x3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=x4;
                            return true;
                        }
                    });
                } 
                else {
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Saldo+=x3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=x4;
                            return true;
                        }
                    });
                }
                if(y1>y2){
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=y1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Saldo+=y2;
                            return true;
                        }
                    });
                } 
                else if (y1=y2) {
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=y1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=y2;
                            return true;
                        }
                    });
                } 
                else {
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Saldo+=y1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=y2;
                            return true;
                        }
                    });
                }
                if(y3>y4){
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=y3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Saldo+=y4;
                            return true;
                        }
                    });
                } 
                else if (y3=y4) {
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=y3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=y4;
                            return true;
                        }
                    });
                } 
                else {
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Saldo+=y3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=y4;
                            return true;
                        }
                    });
                }
                if(z1>z2){
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=z1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Saldo+=z2;
                            return true;
                        }
                    });
                } 
                else if (z1=z2) {
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=z1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=z2;
                            return true;
                        }
                    });
                } 
                else {
                    criterios.find((c,i) => {
                        if (c.Name===time1){
                            criterios[i].Saldo+=z1;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time4){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=z2;
                            return true;
                        }
                    });
                }
                if(z3>z4){
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=z3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Saldo+=z4;
                            return true;
                        }
                    });
                } 
                else if (z3=z4) {
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=z3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Pontos+=1;
                            criterios[i].Saldo+=z4;
                            return true;
                        }
                    });
                } 
                else {
                    criterios.find((c,i) => {
                        if (c.Name===time2){
                            criterios[i].Saldo+=z3;
                            return true;
                        }
                    });
                    criterios.find((c,i) => {
                        if (c.Name===time3){
                            criterios[i].Pontos+=3;
                            criterios[i].Saldo+=z4;
                            return true;
                        }
                    });
                }
                
            }

            function classificados(){
                
                for(var key in groups){
                    var aux = groups[key];
                    var i=0;
                    var first = {
                        name : [],
                        pontos: 0,
                        saldo: 0
                    };
                    var second = {
                        name : [],
                        pontos: 0,
                        saldo: 0
                    };
                    var tmp =[];
                    while(i<4){
                        if (first.name.length === 0){ //checa se nao tem nada salvo
                            first.name = aux[i];
                            let pnt = criterios.find(c => c.Name === aux[i]);
                            first.pontos = pnt.Pontos;
                            first.saldo = pnt.Saldo;
                        }
                        else {
                            let pnt1 = criterios.find(c => c.Name === first.name);
                            let pnt2 = criterios.find(c => c.Name === aux[i]);
                            if (pnt1.Pontos<pnt2.Pontos){ // compara primeiro lugar com novo maior
                                second.name = first.name;
                                second.pontos = pnt1.Pontos;
                                second.saldo = pnt1.Saldo;
                                first.name = aux[i];
                                first.pontos = pnt2.Pontos;
                                first.saldo = pnt2.Saldo;
                            } else if (pnt1.Pontos == pnt2.Pontos) { //comparar mesma qnt de pontos
                                if (pnt1.Saldo == pnt2.Saldo){ //checa se mesmo saldo
                                    var n_boolean = Math.random() < 0.5;
                                    if (n_boolean){ //primeiro permanece , novo vai para segundo
                                        if (second.name.length === 0){ //checa segundo vazio
                                        second.name = aux[i];
                                        second.pontos = pnt2.Pontos;
                                        second.saldo = pnt2.Saldo;
                                        } else { // segundo nao vazio
                                            pnt1 = criterios.find(c => c.Name === second.name);
                                            
                                            if (pnt1.Pontos<pnt2.Pontos){ //compara pontos segundo com novo maior
                                                second.name = aux[i];
                                                second.pontos = pnt2.Pontos;
                                                second.saldo = pnt2.Saldo;
                                            } else if (pnt1.Pontos == pnt2.Pontos){ // checa pontos iguais
                                                if (pnt1.Saldo<pnt2.Saldo){ //confere saldo novo maior
                                                    second.name = aux[i];
                                                    second.pontos = pnt2.Pontos;
                                                    second.saldo = pnt2.Saldo;
                                                } 
                                                else if(pnt1.Saldo == pnt2.Saldo){ //se mesmo saldo ,random
                                                    n_boolean = Math.random() < 0.5;
                                                    if (!n_boolean){// se segundo escolhido substitui
                                                        second.name = aux[i];
                                                        second.pontos = pnt2.Pontos;
                                                        second.saldo = pnt2.Saldo;
                                                    }
                                                }
                                            }
                                        }
                                    } else { // novo vira primeiro, primeiro vai pra segundo
                                        if (second.name.length === 0){ //se segundo vazio
                                            second.name = first.name;
                                            second.pontos = first.pontos;
                                            second.saldo = first.saldo;
                                            first.name = aux[i];
                                            first.pontos = pnt2.Pontos;
                                            first.saldo = pnt2.Saldo;
                                        } else { //segundo nao vazio
                                            let pnt3 = criterios.find(c => c.Name === second.name);
                                            
                                            if (pnt3.Pontos<pnt1.Pontos){//primeiro com mais pontos q segundo
                                                second.name = first.name;
                                                second.pontos = first.pontos;
                                                second.saldo = first.saldo;
                                                first.name = aux[i];
                                                first.pontos = pnt2.Pontos;
                                                first.saldo = pnt2.Saldo;
                                            } else if (pnt3.Pontos==pnt1.Pontos){//primeiro e segundo pontos iguais
                                                if (pnt3.Saldo==pnt1.Saldo){//com mesmo saldo
                                                    n_boolean = Math.random() < 0.5;
                                                    if (!n_boolean){//primeiro vira segundo
                                                    second.name = first.name;
                                                    second.pontos = first.pontos;
                                                    second.saldo = first.saldo;
                                                    first.name = aux[i];
                                                    first.pontos = pnt2.Pontos;
                                                    first.saldo = pnt2.Saldo;
                                                    }
                                                } else if (pnt3.Saldo<pnt1.Saldo){//primeiro com saldo maior
                                                    second.name = first.name;
                                                    second.pontos = first.pontos;
                                                    second.saldo = first.saldo;
                                                    first.name = aux[i];
                                                    first.pontos = pnt2.Pontos;
                                                    first.saldo = pnt2.Saldo;
                                                }
                                            }
                                        }
                                    }
                                } 
                                else if (pnt1.Saldo < pnt2.Saldo){ //saldo novo maior
                                    if (second.name.length === 0){ //segundo vazio
                                        second.name = first.name;
                                        second.pontos = first.pontos;
                                        second.saldo = first.saldo;
                                        first.name = aux[i];
                                        first.pontos = pnt2.Pontos;
                                        first.saldo = pnt2.Saldo;
                                    } else {//segundo nao vazio
                                        let pnt3 = criterios.find(c => c.Name === second.name);
                                        
                                        if (pnt3.Pontos<pnt1.Pontos){//segundo com menos pontos
                                            second.name = first.name;
                                            second.pontos = first.pontos;
                                            second.saldo = first.saldo;
                                            first.name = aux[i];
                                            first.pontos = pnt2.Pontos;
                                            first.saldo = pnt2.Saldo;
                                        } else if (pnt3.Pontos==pnt1.Pontos){//mesmo ponto
                                            if (pnt3.Saldo==pnt1.Saldo){//saldo igual
                                                var n_boolean = Math.random() < 0.5;
                                                if (!n_boolean){
                                                    second.name = first.name;
                                                    second.pontos = first.pontos;
                                                    second.saldo = first.saldo;
                                                    first.name = aux[i];
                                                    first.pontos = pnt2.Pontos;
                                                    first.saldo = pnt2.Saldo;
                                                } else {
                                                    first.name = aux[i];
                                                    first.pontos = pnt2.Pontos;
                                                    first.saldo = pnt2.Saldo;
                                                }
                                            }
                                            else {//saldo primeiro maior
                                                second.name = first.name;
                                                second.pontos = first.pontos;
                                                second.saldo = first.saldo;
                                                first.name = aux[i];
                                                first.pontos = pnt2.Pontos;
                                                first.saldo = pnt2.Saldo;
                                            }
                                        }
                                    }
                                } else { //primeiro permanece , novo vai para segundo
                                    if (second.name.length === 0){ //checa segundo vazio
                                    second.name = aux[i];
                                    second.pontos = pnt2.Pontos;
                                    second.saldo = pnt2.Saldo;
                                    } else { // segundo nao vazio
                                        pnt1 = criterios.find(c => c.Name === second.name);
                                        
                                        if (pnt1.Pontos<pnt2.Pontos){ //compara pontos segundo com novo maior
                                            second.name = aux[i];
                                            second.pontos = pnt2.Pontos;
                                            second.saldo = pnt2.Saldo;
                                        } else if (pnt1.Pontos == pnt2.Pontos){ // checa pontos iguais
                                            if (pnt1.Saldo<pnt2.Saldo){ //confere saldo novo maior
                                                second.name = aux[i];
                                                second.pontos = pnt2.Pontos;
                                                second.saldo = pnt2.Saldo;
                                            } 
                                            else if(pnt1.Saldo == pnt2.Saldo){ //se mesmo saldo ,random
                                                n_boolean = Math.random() < 0.5;
                                                if (!n_boolean){// se segundo escolhido substitui
                                                    second.name = aux[i];
                                                    second.pontos = pnt2.Pontos;
                                                    second.saldo = pnt2.Saldo;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            else if (second.name.length === 0){//novo vai para segundo vazio
                                second.name = aux[i];
                                second.pontos = pnt2.Pontos;
                                second.saldo = pnt2.Saldo;
                            } else {//segundo nao vazio
                                pnt1 = criterios.find(c => c.Name === second.name);
                                
                                if (pnt1.Pontos<pnt2.Pontos){
                                    second.name = aux[i];
                                    second.pontos = pnt2.Pontos;
                                    second.saldo = pnt2.Saldo;
                                } else if (pnt1.Pontos == pnt2.Pontos){
                                    if (pnt1.Saldo == pnt2.Saldo){
                                        var n_boolean = Math.random() < 0.5;
                                        if (!n_boolean){
                                        second.name = aux[i];
                                        second.pontos = pnt2.Pontos;
                                        second.saldo = pnt2.Saldo;
                                        }
                                    } else if (pnt1.Saldo < pnt2.Saldo){
                                        second.name = aux[i];
                                        second.pontos = pnt2.Pontos;
                                        second.saldo = pnt2.Saldo;
                                    }
                                }
                            }
                        }
                        i++;
                    }

                    classficadosGrupo.push({
                        [key] : {
                            first,
                            second 
                        }
                    });
                }

                let text = '<table border="1" style="width:100%" class="centerTable"><tr><th></th><th>Classificados em primeiro</th><th>Classificados em segundo</th>';
                for(var i=0;i<8;i++){
                    let tmp = classficadosGrupo[i];
                    for(var key in tmp){
                        text+= '<tr><th>Grupo ' + key + '</th>';
                        let aux = tmp[key];
                        text+= '<td>'+aux.first.name+' '+aux.first.pontos+' Pontos</td><td>'+aux.second.name+' '+aux.second.pontos+' Pontos</td>';
                    }
                }
                text+='</table>'
                document.getElementById("classificados").innerHTML = text;
                document.getElementById("classificadosButton").disabled = true;
                
            }

            function gerarPartidas(){
                for (var i=0; i<teams.length;i++){
                    criterios.push({
                        "Name": teams[i].Name,
                        "Pontos": 0,
                        "Saldo": 0,
                    });
                }
               
                let text = '<table border="1" style="width:100%" class="centerTable"><tr><th></th><th>Rodada 1 - Jogo 1</th><th>Rodada 1 - Jogo 2</th><th>Rodada 2 - Jogo 1</th><th>Rodada 2 - Jogo 2</th><th>Rodada 3 - Jogo 1</th><th>Rodada 3 - Jogo 2</th>';
                for(var key in groups){
                    text += '<tr><th>Partidas Grupo '+key+"</th>";
                    let x1=Math.floor(Math.random()*4),
                    x2=Math.floor(Math.random()*4),
                    x3=Math.floor(Math.random()*4),
                    x4=Math.floor(Math.random()*4),
                    y1=Math.floor(Math.random()*4),
                    y2=Math.floor(Math.random()*4),
                    y3=Math.floor(Math.random()*4),
                    y4=Math.floor(Math.random()*4),
                    z1=Math.floor(Math.random()*4),
                    z2=Math.floor(Math.random()*4),
                    z3=Math.floor(Math.random()*4),
                    z4=Math.floor(Math.random()*4);// numero de gols aleatorio entre 0-4
                    
                    let aux = groups[key];
                    text+="<td>"+aux[0]+" "+x1+" x "+x2+" "+aux[1]+"</td>";
                    text+="<td>"+aux[2]+" "+x3+" x "+x4+" "+aux[3]+"</td>";
                    text+="<td>"+aux[0]+" "+y1+" x "+y2+" "+aux[2]+"</td>";
                    text+="<td>"+aux[1]+" "+y3+" x "+y4+" "+aux[3]+"</td>";
                    text+="<td>"+aux[0]+" "+z1+" x "+z2+" "+aux[3]+"</td>";
                    text+="<td>"+aux[1]+" "+z3+" x "+z4+" "+aux[2]+"</td></tr>";

                    fillCriterios(aux,x1,x2,x3,x4,y1,y2,y3,y4,z1,z2,z3,z4)
                    
                    

                }
                text+="</table>";
                document.getElementById("partidas").innerHTML = text;
                document.getElementById("partidaButton").disabled = true;

            }

            function oitavas(){
                var aux = new Array();
                let g1 = 0;
                let g2 = 0;
                let text = "<table border='1' style='width:100%' class='centerTable'><tr><th colspan='2'>Oitavas de finais</th>";
                
                g1 = Math.floor(Math.random()*4); 
                g2 = Math.floor(Math.random()*4);
                text+="<td>"+classficadosGrupo[0].A.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[1].B.second.name+"</td>";
                
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[0].A.first.name);}
                    else {aux.push(classficadosGrupo[1].B.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[1].B.second.name);
                } else {
                    aux.push(classficadosGrupo[0].A.first.name);
                }    
                
                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                
                text+="<td>"+classficadosGrupo[2].C.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[3].D.second.name+"</td>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[2].C.first.name);}
                    else {aux.push(classficadosGrupo[3].D.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[3].D.second.name);
                } else {
                    aux.push(classficadosGrupo[2].C.first.name);
                }

                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                text+="<td>"+classficadosGrupo[4].E.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[5].F.second.name+"</td>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[4].E.first.name);}
                    else {aux.push(classficadosGrupo[5].F.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[5].F.second.name);
                } else {
                    aux.push(classficadosGrupo[4].E.first.name);
                }
                
                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                text+="<td>"+classficadosGrupo[6].G.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[7].H.second.name+"</td>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[6].G.first.name);}
                    else {aux.push(classficadosGrupo[7].H.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[7].H.second.name);
                } else {
                    aux.push(classficadosGrupo[6].G.first.name);
                }

                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                text+="<td>"+classficadosGrupo[1].B.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[0].A.second.name+"</td>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[1].B.first.name);}
                    else {aux.push(classficadosGrupo[0].A.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[0].A.second.name);
                } else {
                    aux.push(classficadosGrupo[1].B.first.name);
                }

                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                text+="<td>"+classficadosGrupo[3].D.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[2].C.second.name+"</td>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[3].D.first.name);}
                    else {aux.push(classficadosGrupo[2].C.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[2].C.second.name);
                } else {
                    aux.push(classficadosGrupo[3].D.first.name);
                }

                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                text+="<td>"+classficadosGrupo[5].F.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[4].E.second.name+"</td>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[5].F.first.name);}
                    else {aux.push(classficadosGrupo[4].E.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[4].E.second.name);
                } else {
                    aux.push(classficadosGrupo[5].F.first.name);
                }

                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                text+="<td>"+classficadosGrupo[7].H.first.name+" "+g1+" x "+g2+" "+classficadosGrupo[6].G.second.name+"</td></tr>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(classficadosGrupo[7].H.first.name);}
                    else {aux.push(classficadosGrupo[6].G.second.name);}
                } else if(g1<g2){
                    aux.push(classficadosGrupo[6].G.second.name);
                } else {
                    aux.push(classficadosGrupo[7].H.first.name);
                }

                text+="</table>";
                document.getElementById("oitavas").innerHTML = text;
                
                console.log("vencedores",aux);
                return aux;
            }

            function quartas(){
                var aux = new Array();
                let q1 = 0;
                let q2 = 0;
                let text = "<table border='1' style='width:100%' class='centerTable'><tr><th colspan='2'>Quartas de finais</th>";
                
                q1 = Math.floor(Math.random()*4); q2 = Math.floor(Math.random()*4);
                
                text+="<td>"+vencedores[0]+" "+q1+" x "+q2+" "+vencedores[1]+"</td>";
                if (q1==q2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(vencedores[0]);}
                    else {aux.push(vencedores[1]);}
                } else if(q1<q2){
                    aux.push(vencedores[1]);
                } else {
                    aux.push(vencedores[0]);
                }    
                
                q1 = Math.floor(Math.random()*4); q2 = Math.floor(Math.random()*4);
                text+="<td>"+vencedores[2]+" "+q1+" x "+q2+" "+vencedores[3]+"</td>";
                if (q1==q2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(vencedores[2]);}
                    else {aux.push(vencedores[3]);}
                } else if(q1<q2){
                    aux.push(vencedores[3]);
                } else {
                    aux.push(vencedores[2]);
                }

                q1 = Math.floor(Math.random()*4); q2 = Math.floor(Math.random()*4);
                text+="<td>"+vencedores[4]+" "+q1+" x "+q2+" "+vencedores[5]+"</td>";
                if (q1==q2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(vencedores[4]);}
                    else {aux.push(vencedores[5]);}
                } else if(q1<q2){
                    aux.push(vencedores[5]);
                } else {
                    aux.push(vencedores[4]);
                }
                
                q1 = Math.floor(Math.random()*4); q2 = Math.floor(Math.random()*4);
                text+="<td>"+vencedores[6]+" "+q1+" x "+q2+" "+vencedores[7]+"</td></tr>";
                if (q1==q2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(vencedores[6]);}
                    else {aux.push(vencedores[7]);}
                } else if(q1<q2){
                    aux.push(vencedores[7]);
                } else {
                    aux.push(vencedores[6]);
                }

                text+="</table>";
                document.getElementById("quartas").innerHTML = text;
                return aux;
            }

            function semifinal(){
                var aux = new Array();
                let g1 = 0;
                let g2 = 0;
                let text = "<table border='1' style='width:100%' class='centerTable'><tr><th colspan='2'>Semifinais</th>";
                
                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                
                text+="<td>"+vencedores[0]+" "+g1+" x "+g2+" "+vencedores[1]+"</td>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(vencedores[0]);}
                    else {aux.push(vencedores[1]);}
                } else if(g1<g2){
                    aux.push(vencedores[1]);
                } else {
                    aux.push(vencedores[0]);
                }    
                
                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                text+="<td>"+vencedores[2]+" "+g1+" x "+g2+" "+vencedores[3]+"</td></tr>";
                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(vencedores[2]);}
                    else {aux.push(vencedores[3]);}
                } else if(g1<g2){
                    aux.push(vencedores[3]);
                } else {
                    aux.push(vencedores[2]);
                }

                text+="</table>";
                document.getElementById("semifinais").innerHTML = text;
                return aux;
            }

            function partidaFinal(){
                var aux = new Array();
                const data = {
                    "equipeA":"",
                    "equipeB":"",
                    "golsEquipeA":0,
                    "golsEquipeB":0,
                    "golsPenaltyTimeA":0,
                    "golsPenaltyTimeB":0
                };
                let g1 = 0;
                let g2 = 0;
                let text = "<table border='1' style='width:100%' class='centerTable'><tr><th colspan='2'>Final</th>";
                
                g1 = Math.floor(Math.random()*4); g2 = Math.floor(Math.random()*4);
                
                text+="<td>"+vencedores[0]+" "+g1+" x "+g2+" "+vencedores[1]+"</td></tr>";
                data.equipeA = vencedores[0];
                data.equipeB = vencedores[1];
                data.golsEquipeA = g1;
                data.golsEquipeB = g2;

                if (g1==g2){
                    var n_boolean = Math.random() < 0.5;
                    if (n_boolean){ aux.push(vencedores[0]);}
                    else {aux.push(vencedores[1]);}
                } else if(g1<g2){
                    aux.push(vencedores[1]);
                } else {
                    aux.push(vencedores[0]);
                }    
                
                text+="</table>";
                document.getElementById("final").innerHTML = text;

                fetch('https://estagio.geopostenergy.com/WorldCup/InsertFinalResult',{method: "POST",headers: new Headers({'git-user':'brunodf05'}),body: JSON.stringify(data)})
                .then(res => {
                    console.log("Request completo, response: ",res);
                });
                return aux;
            }

            function torneio(){
                vencedores = oitavas();
                vencedores = quartas();
                vencedores = semifinal();
                final = partidaFinal();

                let text = "<table border='1' style='width:100%' class='centerTable'><tr><th colspan='2'>Vencedor</th>";
                text+="<td>"+final[0]+"</td></tr></table>";
                document.getElementById("vencedor").innerHTML = text;
                document.getElementById("torneioButton").disabled = true;
                
            }
        </script>        
    </body>
</html>